version: 2


models:
  - name: default.vw_pin_address
    description: '{{ doc("vw_pin_address") }}'

    tests:
      # No superfluous whitespace
      - no_extra_whitespace:
          name: vw_pin_address_no_extra_whitespace
          column_names:
            - prop_address_full
            - prop_address_city_name
            - prop_address_state
            - prop_address_zipcode_1
            - prop_address_zipcode_2
            - mail_address_full
            - mail_address_city_name
            - mail_address_state
            - mail_address_zipcode_1
            - mail_address_zipcode_2
          config:
            error_if: ">900000"
      - unique_combination_of_columns:
          name: vw_pin_address_unique_by_14_digit_pin_and_year
          combination_of_columns:
            - pin
            - year
      # TODO: Mailing address changes after validated sale(?)
      # TODO: Site addresses are all in Cook County
