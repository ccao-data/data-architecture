version: 2


models:
  - name: default.vw_pin_history
    columns:
      - name: twoyr_pri_mailed_tot
        description: Mailed total assessed value from 2 years prior to observation year
      - name: twoyr_pri_mailed_land
        description: Mailed assessed value of land from 2 years prior to observation year
      - name: twoyr_pri_mailed_bldg
        description: Mailed assessed value of building from 2 years prior to observation year
      - name: twoyr_pri_certified_tot
        description: Certified total assessed value from 2 years prior to observation year
      - name: twoyr_pri_certified_land
        description: Certified assessed value of land from 2 years prior to observation year
      - name: twoyr_pri_certified_bldg
        description: Certified assessed value of building from 2 years prior to observation year
      - name: twoyr_pri_board_tot
        description: Board of Review total assessed value from 2 years prior to observation year
      - name: twoyr_pri_board_land
        description: Board of Review assessed value of land from 2 years prior to observation year
      - name: twoyr_pri_board_bldg
        description: Board of Review assessed value of building from 2 years prior to observation year
      - name: oneyr_pri_mailed_tot
        description: Mailed total assessed value from 1 year prior to observation year
      - name: oneyr_pri_mailed_land
        description: Mailed assessed value of land from 1 year prior to observation year
      - name: oneyr_pri_mailed_bldg
        description: Mailed assessed value of building from 1 year prior to observation year
      - name: oneyr_pri_certified_tot
        description: Certified total assessed value from 1 year prior to observation year
      - name: oneyr_pri_certified_land
        description: Certified assessed value of land from 1 year prior to observation year
      - name: oneyr_pri_certified_bldg
        description: Certified assessed value of building from 1 year prior to observation year
      - name: oneyr_pri_board_tot
        description: Board of Review total assessed value from 1 year prior to observation year
      - name: oneyr_pri_board_land
        description: Board of Review assessed value of land from 1 year prior to observation year
      - name: oneyr_pri_board_bldg
        description: Board of Review assessed value of building from 1 year prior to observation year
      - name: mailed_tot
        description: Mailed total assessed value from observation year
      - name: mailed_land
        description: Mailed assessed value of land from observation year
      - name: mailed_bldg
        description: Mailed assessed value of building from observation year
      - name: certified_tot
        description: Certified total assessed value from observation year
      - name: certified_land
        description: Certified assessed value of land from observation year
      - name: certified_bldg
        description: Certified assessed value of building from observation year
      - name: board_tot
        description: Board of Review total assessed value from observation year
      - name: board_land
        description: Board of Review assessed value of land from observation year
      - name: board_bldg
        description: Board of Review assessed value of building from observation year
    description: '{{ doc("vw_pin_history") }}'
    tests:
      # Unique by 14-digit PIN and year
      - unique_combination_of_columns:
          name: vw_pin_history_unique_by_14_digit_pin_and_year
          combination_of_columns:
            - pin
            - year
  - name: default.vw_pin_value
    description: '{{ doc("vw_pin_value") }}'
    tests:
      # Unique by 14-digit PIN and year
      - unique_combination_of_columns:
          name: vw_pin_value_unique_by_14_digit_pin_and_year
          combination_of_columns:
            - pin
            - year
      # TODO: Values match what's in whatever iasworld view feeds our website
  - name: default.vw_pin_appeal
    description: '{{ doc("vw_pin_appeal") }}'
    tests:
      # `change` should be an enum
      - expression_is_true:
          name: vw_pin_appeal_no_unexpected_change_values
          expression: change is null or change in ('change', 'no change')
          select_columns:
            - pin
            - year
            - case_no
            - change
          config:
            error_if: ">43"
      # If there is a `change`, the values should reflect this
      - expression_is_true:
          name: vw_pin_appeal_change_matches_appeal_outcome
          expression: >-
            (change = 'no change' AND
              (mailed_bldg, mailed_land, mailed_tot)
              =
              (certified_bldg, certified_land, certified_tot)
            )
            OR
            (change = 'change' AND
              (mailed_bldg, mailed_land, mailed_tot)
              !=
              (certified_bldg, certified_land, certified_tot)
            )
            OR
            (change is null)
          select_columns:
            - pin
            - year
            - case_no
            - mailed_bldg
            - certified_bldg
            - mailed_land
            - certified_land
            - mailed_tot
            - certified_tot
          config:
            error_if: ">266758"
  - name: default.vw_card_res_char
    columns:
      - name: card_proration_rate
        description: Proration rate within a given PIN
        meta:
          notes: Some PINs have multiple improvements, known as "cards". Total value for a PIN should be allocated across cards accordingly.
      - name: pin_is_multiland
        description: Indicates the PIN has more than one landline
      - name: pin_is_multicard
        description: Indicator for a PIN with more than one building (ADU, coach house, etc.)
      - name: char_tp_dsgn
        meta:
          notes: Field has not been updated recently enough to be useful for modeling
      - name: char_site
        meta:
          notes: This field lacks sufficient variation to be useful for modeling
      - name: char_rooms
        description: Number of total rooms in the building (excluding baths). Not to be confused with bedrooms
      - name: char_repair_cnd
        meta:
          notes: This field is subjective and contains little variation. As such, it is not used for modeling
      - name: char_recent_renovation
        description: Indicates whether or not a property was renovated within the last 3 years
        meta:
          notes: Renovation is indicated by the char_renovation characteristic flipping from "NO" to "YES"
      - name: char_ncu
        description: Number of commercial units
        meta:
          notes: The vast majority are for properties with class 212
      - name: char_land_sf
        description: Square footage of the land (not just the building) of the property.
        meta:
          notes: A single PIN can have multiple "land lines," meaning it can be associated with more than one 200-class land lot
      - name: char_hbath
        description: Number of half baths, defined as bathrooms without a shower or bathtub
      - name: char_gar1_area
        meta:
          notes: Is Garage 1 physically included within the building area? If yes, the garage area is subtracted from the building square feet calculation by the field agent
      - name: char_frpl
        description: Number of fireplaces, counted as the number of flues one can see from the outside of the building
      - name: char_fbath
        description: Number of full bathrooms, defined as having a bath or shower
        meta:
          notes: If this value is missing, the default value is set to 1
      - name: char_cnst_qlty
        meta:
          notes: In general, this field is not used consistently and is therefore not useful for analytical purposes
      - name: char_bldg_sf
        description: Square footage of the building, as measured from the exterior
      - name: char_beds
        description: Number of bedrooms in the building
      - name: char_apts
        description: Number of apartments for class 211 and 212 properties
        meta:
          notes: "CAUTION: Note the numerically encoded values DO NOT correspond to the number of apartments i.e. code 1 means 2 apartments, code 6 means 0 apartments"
      - name: char_age
        description: Deprecated. Use year built instead
      - name: cdu
        description: Dozens of codes attached to a face sheet that denote a number of seemingly unrelated characteristics associated with a PIN, ranging from condition to types of subsidies
      - name: card
        description: Represents the building ID if multiple buildings or spaces exist on the same PIN
        meta:
          notes: Equivalent to legacy MLT_CD (multicode)
    description: '{{ doc("vw_card_res_char") }}'
    tests:
      # Unique by card and year
      - dbt_utils.unique_combination_of_columns:
          name: vw_card_res_char_unique_by_pin_card_and_year
          combination_of_columns:
            - pin
            - year
            - card
      # TODO: Characteristics columns should adhere to pre-determined criteria
  - name: default.vw_pin_address
    description: '{{ doc("vw_pin_address") }}'
    tests:
      # Unique by 14-digit PIN and year
      - unique_combination_of_columns:
          name: vw_pin_address_unique_by_14_digit_pin_and_year
          combination_of_columns:
            - pin
            - year
      # No superfluous whitespace
      - no_extra_whitespace:
          name: vw_pin_address_no_extra_whitespace
          column_names:
            - prop_address_full
            - prop_address_city_name
            - prop_address_state
            - prop_address_zipcode_1
            - prop_address_zipcode_2
            - mail_address_full
            - mail_address_city_name
            - mail_address_state
            - mail_address_zipcode_1
            - mail_address_zipcode_2
          config:
            error_if: ">880615"
      # TODO: Mailing address changes after validated sale(?)
      # TODO: Site addresses are all in Cook County
  - name: default.vw_pin_condo_char
    columns:
      - name: parking_space_flag_reason
        description: Parking space/storage unit heuristic that was triggered
      - name: is_parking_space
        description: Deeded parking/garage space or storage unit detected either by valuations, CDU, or unit number/proration rate heuristics
      - name: is_common_area
        description: Building common area detected primarily through prior AV of less than 10
      - name: char_tiebldgpct
        description: Proration rate for a given PIN
        meta:
          notes: Some buildings sit across multiple PINs. This number is intended to capture the split in building value
      - name: char_building_pins
        description: The number of 14 digits PINs associated with a given 10 digit PIN in iasworld.pardat
      - name: char_building_non_units
        description: The number of 14 digits PINs associated with a given 10 digit PIN in iasworld.pardat less units identified as parking spaces, commone areas, or storage units through a number of validation criteria
      - name: card_proration_rate
        description: Proration rate within a given PIN
        meta:
          notes: Some PINs have multiple improvements, known as "cards". Total value for a PIN should be allocated across cards accordingly.
    description: '{{ doc("vw_pin_condo_char") }}'
    tests:
      # Unique by 14-digit PIN and year
      - unique_combination_of_columns:
          name: vw_pin_condo_char_unique_by_14_digit_pin_and_year
          combination_of_columns:
            - pin
            - year
          config:
            error_if: ">70297"
      # TODO: Non-liveable unit heuristics
      # TODO: Row count matches PARDAT for condo classes
      # TODO: Non-unit and unit parcel count add up to total parcels per
      # 10-digit PIN
      # TODO: Sum of proration rate never exceeds 1 per 10-digit PIN
      # TODO: Characteristics columns should adhere to pre-determined criteria
  - name: default.vw_pin_land
    description: '{{ doc("vw_pin_land") }}'
  - name: default.vw_pin_sale
    columns:
      - name: sale_price
        description: Fair market sale price of a PIN
        meta:
          notes: Sales are sourced from myDec/IDOR. This serves as the outcome variable in regression models
      - name: sale_key
        description: iasWorld internal sale identifier
      - name: sale_filter_upper_limit
        description: Calculated boundary used to filter sales. See view definition
      - name: sale_filter_lower_limit
        description: Calculated boundary used to filter sales. See view definition
      - name: sale_filter_count
        description: Number of sales used to calculate upper and lower boundary
      - name: num_parcels_sale
        description: Number of parcels that are part of multisale
      - name: is_multisale
        description: Indicates whether or not a sale involved multiple parcels
      - name: doc_no
        tests:
          - unique:
              config:
                error_if: ">1711769"
    description: '{{ doc("vw_pin_sale") }}'
    tests:
      # No sales for same price/pin within 12 months
      - unique_combination_of_columns:
          name: vw_pin_sale_unique_price_pin_and_year
          combination_of_columns:
            - pin
            - year
            - sale_price
      # Number of sales for a given time period isn't suspicious
      - unique_combination_of_columns:
          name: vw_pin_sale_reasonable_number_of_sales_per_year
          combination_of_columns:
            - pin
            - year
          allowed_duplicates: 2
          config:
            error_if: ">3192"
      # TODO: Sale is validated (after sales validation has been added to
      # iasworld)
      # TODO: Validation is catching obvious outliers
      # TODO: Joins with other tables produce consistent number of rows
  - name: default.vw_pin_universe
    columns:
      - name: y_3435
        description: PIN location derived from the centroid of the largest polygon associated with the PIN
      - name: x_3435
        description: PIN location derived from the centroid of the largest polygon associated with the PIN
      - name: ward_num
        description: Ward ID for municipalities with wards
        meta:
          notes: currently only Chicago and Evanston
      - name: township_code
        description: Numeric code identifying the Cook County township of a given PIN
      - name: tieback_proration_rate
        description: Proration rate for a given PIN
        meta:
          notes: Some buildings sit across multiple PINs. This number is intended to capture the split in building value
      - name: tax_special_service_area_num
        description: Tax ID of the special service area of a given PIN, if applicable
        meta:
          notes: Taken from Cook County GIS shapefiles
      - name: tax_code
        description: Identifier for the unique combination of taxing districts which impose a levy on any given PIN
      - name: school_unified_district_geoid
        description: Unified school district ID for a given PIN
        meta:
          notes: CPS is included as a unified district. Taken from Cook County GIS shapefiles
      - name: school_secondary_district_geoid
        description: Secondary school district ID for a given PIN
        meta:
          notes: For CPS, secondary school attendance boundaries are used. Taken from Cook County GIS shapefiles
      - name: school_elementary_district_geoid
        description: Elementary school district ID for a given PIN
        meta:
          notes: For CPS, elementary school attendance boundaries are used. Taken from Cook County GIS shapefiles
      - name: prop_address_zipcode_2
        description: Property street address
        meta:
          notes: Not the address of the taxpayer/property owner
      - name: prop_address_zipcode_1
        description: Property street address
        meta:
          notes: Not the address of the taxpayer/property owner
      - name: prop_address_unit_prefix
        description: Property street address
        meta:
          notes: Not the address of the taxpayer/property owner
      - name: prop_address_unit_number
        description: Property street address
        meta:
          notes: Not the address of the taxpayer/property owner
      - name: prop_address_suffix_2
        description: Property street address
        meta:
          notes: Not the address of the taxpayer/property owner
      - name: prop_address_suffix_1
        description: Property street address
        meta:
          notes: Not the address of the taxpayer/property owner
      - name: prop_address_street_number
        description: Property street address
        meta:
          notes: Not the address of the taxpayer/property owner
      - name: prop_address_street_name
        description: Property street address
        meta:
          notes: Not the address of the taxpayer/property owner
      - name: prop_address_street_dir
        description: Property street address
        meta:
          notes: Not the address of the taxpayer/property owner
      - name: prop_address_state
        description: Property street address
        meta:
          notes: Not the address of the taxpayer/property owner
      - name: prop_address_prefix
        description: Property street address
        meta:
          notes: Not the address of the taxpayer/property owner
      - name: prop_address_full
        description: Property street address
        meta:
          notes: Not the address of the taxpayer/property owner
      - name: prop_address_city_name
        description: Property street address
        meta:
          notes: Not the address of the taxpayer/property owner
      - name: pin10
        description: First 10 digits of a PIN
        meta:
          notes: Useful for identifying individual condominium buildings since the last 4 digits of a PIN identify units
      - name: pin
        description: Full PIN
        meta:
          notes: "All PINs are 14 digits: 2 digits for area + 2 digits for sub area + 2 digits for block + 2 digits for parcel + 4 digits for the condominium unit/leasehold"
      - name: num_school_with_rating_in_half_mile
        description: Number of schools with Great Schools ratings within half mile of a given PIN
      - name: num_school_in_half_mile
        description: Number of schools within half mile of a given PIN
        meta:
          notes: This includes preschools, small private schools, universities, etc
      - name: num_pin_in_half_mile
        description: Number of PINs within half mile of a given PIN
        meta:
          notes: Condo buildings are counted as a single PIN
      - name: num_foreclosure_per_1000_pin_past_5_years
        description: Number of PIN-level foreclosure in the past 5 years, per 1000 PINs, within half mile of a given PIN
        meta:
          notes: Taken from Illinois Public Records https://public-record.com/login/
      - name: num_bus_stop_in_half_mile
        description: Number of bus stops (CTA or PACE) within half mile of a given PIN
        meta:
          notes: Taken from GTFS feeds retrieved from transitfeeds.com
      - name: nearest_water_dist_ft
        description: Distance in feet to the nearest water
        meta:
          notes: As identified by Cook County hydrology files
      - name: nearest_railroad_dist_ft
        description: Distance in feet to the nearest rail (not including CTA)
        meta:
          notes: Taken from Cook County GIS shapefiles
      - name: nearest_park_dist_ft
        description: Distance in feet to the nearest park
        meta:
          notes: Pull via OpenStreetMap, key=leisure, value=park
      - name: nearest_metra_stop_dist_ft
        description: Distance in feet to the nearest Metra stop
        meta:
          notes: Taken from Metra GTFS feeds retrieved via transitfeeds.com
      - name: nearest_metra_route_dist_ft
        description: Distance in feet to the nearest Metra tracks
        meta:
          notes: Taken from Metra GTFS feeds retrieved via transitfeeds.com
      - name: nearest_major_road_dist_ft
        description: Distance in feet to the nearest major road/highway
        meta:
          notes: Pulled via OpenStreetMap, key=highway, value=motorway,primary,trunk
      - name: nearest_hospital_dist_ft
        description: Distance in feet to the nearest hospital (polygon)
        meta:
          notes: Taken from Cook County GIS shapefiles
      - name: nearest_golf_course_dist_ft
        description: Distance in feet to the nearest golf course (polygon)
        meta:
          notes: Taken from Cook County GIS shapefiles and OpenStreetMap
      - name: nearest_cta_stop_dist_ft
        description: Distance in feet to the nearest CTA stop
        meta:
          notes: Taken from CTA GTFS feeds retrieved via transitfeeds.com
      - name: nearest_cta_stop_data_year
        description: Distance in feet to the nearest Metra stop
        meta:
          notes: Taken from Metra GTFS feeds retrieved via transitfeeds.com
      - name: nearest_cta_route_dist_ft
        description: Distance in feet to the nearest CTA tracks
        meta:
          notes: Taken from CTA GTFS feeds retrieved via transitfeeds.com
      - name: nearest_cemetery_dist_ft
        description: Distance in feet to the nearest cemetery (polygon)
        meta:
          notes: Taken from Cook County GIS shapefiles
      - name: nearest_bike_trail_dist_ft
        description: Distance in feet to the nearest bike trail (linestring)
        meta:
          notes: Taken from Cook County GIS shapefiles
      - name: nbhd_code
        description: Assessor neighborhood
        meta:
          notes: First 2 digits are township code, last 3 digits are neighborhood code
      - name: misc_unincorporated_area_bool
        description: Indicator for a PIN within an unincorporated part of Cook County
        meta:
          notes: Taken from Cook County GIS shapefiles
      - name: misc_subdivision_id
        description: Subdivision ID for a given PIN
        meta:
          notes: Nearly all PINs are within one subdivision. Each subdivision has a unique ID with the PageSubref column. Page being the area and section and subref being the letter of that sub on a page. The subrefs go A B C D and so on, however new subs can kill old subs, so a page could have subrefs B C G M L R S T, with each letter being a unique subdivision
      - name: mail_address_zipcode_2
        description: Taxpayer/property owner address
      - name: mail_address_zipcode_1
        description: Taxpayer/property owner address
      - name: mail_address_state
        description: Taxpayer/property owner address
      - name: mail_address_name
        description: Taxpayer/property owner address
      - name: mail_address_full
        description: Taxpayer/property owner address
      - name: mail_address_city_name
        description: Taxpayer/property owner address
      - name: lon
        description: PIN location derived from the centroid of the largest polygon associated with the PIN
      - name: lat
        description: PIN location derived from the centroid of the largest polygon associated with the PIN
      - name: lake_michigan_dist_ft
        description: Distance in feet to the Lake Michigan coastline
        meta:
          notes: Taken from TIGER/Line coastlines file and filtered to Cook County only
      - name: env_ohare_noise_contour_no_buffer_bool
        description: O'Hare Airport 65 DNL noise contour
        meta:
          notes: Taken from oharenoise.org
      - name: env_flood_fs_risk_direction
        description: First Street risk direction for a given PIN
        meta:
          notes: Positive scores indicate increasing future flood risk, negative scores the opposite. Provided to the CCAO by firststreet.org
      - name: env_flood_fs_factor
        description: First Street flood factor (risk score) for a given PIN, scores 1 - 10
        meta:
          notes: Provided to the CCAO by firststreet.org
      - name: env_flood_fema_sfha
        description: Indicator for a PIN within a FEMA Special Flood Hazard Area
        meta:
          notes: Taken from FEMA site for 2021 only
      - name: env_airport_noise_dnl
        description: Airport noise calculated via kriging noise monitor data from CDA
        meta:
          notes: See https://gitlab.com/ccao-data-science---modeling/models/ccao_res_avm/-/issues/70 for more information
      - name: cook_municipality_name
        description: Municipality name for a given PIN
        meta:
          notes: Taken from Cook County GIS shapefiles
      - name: census_acs5_tract_geoid
        meta:
          notes: Census ACS5 columns provide the geographic IDs (GEOIDs) of Census geography with the latest ACS5 data available. For example, only 2019 ACS5 data is available in 2022, so the ACS5 tract GEOID is the 2019 Census geography joined to the 2022 PIN
      - name: census_acs5_state_senate_geoid
        meta:
          notes: Census ACS5 columns provide the geographic IDs (GEOIDs) of Census geography with the latest ACS5 data available. For example, only 2019 ACS5 data is available in 2022, so the ACS5 tract GEOID is the 2019 Census geography joined to the 2022 PIN
      - name: census_acs5_state_representative_geoid
        meta:
          notes: Census ACS5 columns provide the geographic IDs (GEOIDs) of Census geography with the latest ACS5 data available. For example, only 2019 ACS5 data is available in 2022, so the ACS5 tract GEOID is the 2019 Census geography joined to the 2022 PIN
      - name: census_acs5_school_district_unified_geoid
        meta:
          notes: Census ACS5 columns provide the geographic IDs (GEOIDs) of Census geography with the latest ACS5 data available. For example, only 2019 ACS5 data is available in 2022, so the ACS5 tract GEOID is the 2019 Census geography joined to the 2022 PIN
      - name: census_acs5_school_district_secondary_geoid
        meta:
          notes: Census ACS5 columns provide the geographic IDs (GEOIDs) of Census geography with the latest ACS5 data available. For example, only 2019 ACS5 data is available in 2022, so the ACS5 tract GEOID is the 2019 Census geography joined to the 2022 PIN
      - name: census_acs5_school_district_elementary_geoid
        meta:
          notes: Census ACS5 columns provide the geographic IDs (GEOIDs) of Census geography with the latest ACS5 data available. For example, only 2019 ACS5 data is available in 2022, so the ACS5 tract GEOID is the 2019 Census geography joined to the 2022 PIN
      - name: census_acs5_puma_geoid
        meta:
          notes: Census ACS5 columns provide the geographic IDs (GEOIDs) of Census geography with the latest ACS5 data available. For example, only 2019 ACS5 data is available in 2022, so the ACS5 tract GEOID is the 2019 Census geography joined to the 2022 PIN
      - name: census_acs5_place_geoid
        meta:
          notes: Census ACS5 columns provide the geographic IDs (GEOIDs) of Census geography with the latest ACS5 data available. For example, only 2019 ACS5 data is available in 2022, so the ACS5 tract GEOID is the 2019 Census geography joined to the 2022 PIN
      - name: census_acs5_data_year
        meta:
          notes: Census ACS5 columns provide the geographic IDs (GEOIDs) of Census geography with the latest ACS5 data available. For example, only 2019 ACS5 data is available in 2022, so the ACS5 tract GEOID is the 2019 Census geography joined to the 2022 PIN
      - name: census_acs5_county_subdivision_geoid
        meta:
          notes: Census ACS5 columns provide the geographic IDs (GEOIDs) of Census geography with the latest ACS5 data available. For example, only 2019 ACS5 data is available in 2022, so the ACS5 tract GEOID is the 2019 Census geography joined to the 2022 PIN
      - name: census_acs5_congressional_district_geoid
        meta:
          notes: Census ACS5 columns provide the geographic IDs (GEOIDs) of Census geography with the latest ACS5 data available. For example, only 2019 ACS5 data is available in 2022, so the ACS5 tract GEOID is the 2019 Census geography joined to the 2022 PIN
      - name: avg_school_rating_in_half_mile
        description: Average Great Schools rating for all schools (with a rating) within half mile of a given PIN
        meta:
          notes: Public schools must be within the same district as the PIN to be considered in the average
      - name: access_cmap_walk_total_score
        description: CMAP walkability score for a given PIN, including transit walkability
        meta:
          notes: Taken from CMAP's ON TO 2050 walkability layer
      - name: access_cmap_walk_nta_score
        description: CMAP walkability score for a given PIN, excluding transit walkability
        meta:
          notes: Taken from CMAP's ON TO 2050 walkability layer
    description: '{{ doc("vw_pin_universe") }}'
    tests:
      # Unique by 14-digit PIN and year
      - unique_combination_of_columns:
          name: vw_pin_universe_unique_by_14_digit_pin_and_year
          combination_of_columns:
            - pin
            - year
      # Number of towns is consistent over time
      - count_is_consistent:
          name: vw_pin_universe_township_code_count_is_consistent_by_year
          group_column: year
          count_column: township_code
      # Number of classes is consistent over time
      - count_is_consistent:
          name: vw_pin_universe_class_count_is_consistent_by_year
          group_column: year
          count_column: class
          config:
            error_if: ">24"
      # TODO: Data completeness correlates with availability of spatial data
      # by year
  - name: default.vw_pin_exempt
